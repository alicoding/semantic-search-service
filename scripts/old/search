#!/usr/bin/env python3
"""
Simple CLI wrapper for semantic search
Usage: ./search <query> <project> [limit]
"""

import sys
import json
from semantic_search import search, list_projects, get_project_info

def main():
    if len(sys.argv) < 2:
        print("Semantic Search CLI")
        print("\nUsage:")
        print("  ./search list                    - List all projects")
        print("  ./search info <project>          - Get project info")
        print("  ./search <query> <project> [limit] - Search in project")
        sys.exit(1)
    
    command = sys.argv[1]
    
    if command == "list":
        projects = list_projects()
        for p in projects:
            print(p)
    
    elif command == "info" and len(sys.argv) >= 3:
        project = sys.argv[2]
        info = get_project_info(project)
        print(json.dumps(info, indent=2))
    
    elif len(sys.argv) >= 3:
        query = sys.argv[1]
        project = sys.argv[2]
        limit = int(sys.argv[3]) if len(sys.argv) > 3 else 5
        
        result = search(query, project, limit)
        print(result)
    
    else:
        print("Invalid command")
        sys.exit(1)

if __name__ == "__main__":
    main()